# AI Creator Studio - äº§å“éœ€æ±‚æ–‡æ¡£ v2.0 (SQLiteå®ç°)

> **ç‰ˆæœ¬**: 2.0 (SQLiteæ¶æ„ä¿®è®¢ç‰ˆ)
> **ä¿®è®¢æ—¥æœŸ**: 2025å¹´1æœˆ
> **ä¿®è®¢åŸå› **: åŸºäºå½“å‰å®ç°çš„SQLiteæ¶æ„ï¼Œè°ƒæ•´æŠ€æœ¯æ–¹æ¡ˆå’ŒåŠŸèƒ½è§„æ ¼

---

## ğŸ“‹ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯åŸºäºå½“å‰å·²å®ç°çš„SQLiteæ¶æ„å¯¹åŸPRDçš„ä¿®è®¢ç‰ˆæœ¬ã€‚ä¿ç•™äº†åŸäº§å“çš„æ ¸å¿ƒåŠŸèƒ½å’Œç”¨æˆ·ä»·å€¼ï¼Œä½†æŠ€æœ¯æ¶æ„å’Œæ•°æ®å­˜å‚¨æ–¹æ¡ˆæ ¹æ®å®é™…å®ç°è¿›è¡Œäº†è°ƒæ•´ã€‚

**ä¸»è¦å˜æ›´**:
- æ•°æ®å­˜å‚¨ï¼šä» n8n + é£ä¹¦å¤šç»´è¡¨æ ¼ â†’ SQLiteå•ä¸€æ•°æ®åº“
- éƒ¨ç½²æ–¹æ¡ˆï¼šä» Vercel + Railway â†’ GitHub Pages
- æŠ€æœ¯å¤æ‚åº¦ï¼šé™ä½å®ç°é—¨æ§›ï¼Œæé«˜å¼€å‘æ•ˆç‡
- åŠŸèƒ½èŒƒå›´ï¼šèšç„¦æ ¸å¿ƒåŠŸèƒ½ï¼Œä¸ºåç»­æ‰©å±•ç•™å‡ºç©ºé—´

---

## 1. äº§å“æ¦‚è¿°

### 1.1 äº§å“å®šä½

AI Creator Studio æ˜¯ä¸€ä¸ª**AIé©±åŠ¨çš„åˆ›æ„å†…å®¹ç”Ÿæˆå¹³å°**ï¼Œä¸“æ³¨äºå›¾ç‰‡å’Œè§†é¢‘çš„æ‰¹é‡ç”Ÿæˆä¸ç®¡ç†ã€‚é€šè¿‡æ•´åˆå¤šç§AIæ¨¡å‹ï¼ˆDALL-Eã€MidJourneyã€Stable Diffusionç­‰ï¼‰ï¼Œä¸ºå†…å®¹åˆ›ä½œè€…æä¾›ä¸€ç«™å¼åˆ›æ„è§£å†³æ–¹æ¡ˆã€‚

### 1.2 æ ¸å¿ƒä»·å€¼ä¸»å¼ 

- **æ‰¹é‡å˜é‡ç”Ÿæˆ**: æ”¯æŒå˜é‡æ›¿æ¢ï¼Œä¸€æ¬¡æç¤ºç”Ÿæˆå¤šç§å˜ä½“
- **æ™ºèƒ½ç¼“å­˜æœºåˆ¶**: åŸºäºPromptå“ˆå¸Œçš„å»é‡ï¼Œé™ä½APIæˆæœ¬
- **å®æ—¶è¿›åº¦è¿½è¸ª**: Server-Sent Eventså®ç°ä»»åŠ¡çŠ¶æ€å®æ—¶æ›´æ–°
- **ç»Ÿä¸€ç´ æç®¡ç†**: è‡ªåŠ¨åˆ†ç±»ã€æ ‡ç­¾ã€é¢„è§ˆå’Œä¸‹è½½
- **æˆæœ¬é€æ˜åŒ–**: ç²¾ç¡®è®¡ç®—å’Œæˆæœ¬é¢„ä¼°

### 1.3 ç›®æ ‡ç”¨æˆ·

- **å†…å®¹åˆ›ä½œè€…**: åšä¸»ã€UPä¸»ã€è‡ªåª’ä½“è¿è¥è€…
- **è®¾è®¡å¸ˆ**: UI/UXè®¾è®¡å¸ˆã€å¹³é¢è®¾è®¡å¸ˆã€åˆ›æ„å·¥ä½œè€…
- **è¥é”€å›¢é˜Ÿ**: ç¤¾äº¤åª’ä½“è¥é”€ã€å¹¿å‘Šåˆ›æ„å›¢é˜Ÿ
- **ä¼ä¸šç”¨æˆ·**: ç”µå•†ã€æ¸¸æˆã€å½±è§†å…¬å¸çš„å†…å®¹åˆ¶ä½œéƒ¨é—¨

### 1.4 å…³é”®æŒ‡æ ‡ï¼ˆKPIï¼‰- å·²è°ƒæ•´

| ç±»å‹ | æŒ‡æ ‡ | åŸç›®æ ‡å€¼ | **å½“å‰å®ç°å€¼** | å¤‡æ³¨ |
|------|------|----------|--------------|------|
| **æ•ˆç‡** | æ—¥å¤„ç†èƒ½åŠ› | 250+ å›¾ç‰‡/è§†é¢‘ | **å•æ¬¡ç”Ÿæˆ** | v2.0ç®€åŒ–ç‰ˆ |
| **æ•ˆç‡** | ä»»åŠ¡åˆ›å»ºè€—æ—¶ | < 30ç§’ | **10-15ç§’** | âœ… å·²è¾¾æ ‡ |
| **æ•ˆç‡** | çŠ¶æ€æ›´æ–°å»¶è¿Ÿ | < 100ms | **<200ms** | âœ… åŸºæœ¬è¾¾æ ‡ |
| **æˆæœ¬** | æœˆåº¦æˆæœ¬ | $150-200 | **æŒ‰éœ€ä»˜è´¹** | ç”¨æˆ·è‡ªæ§åˆ¶ |
| **æˆæœ¬** | ç¼“å­˜èŠ‚çœç‡ | 20-30% | **æœªå®ç°** | v2.1ç›®æ ‡ |
| **æˆæœ¬** | APIè°ƒç”¨å‡å°‘ | 48% | **0%** | v2.1ç›®æ ‡ |
| **ä½“éªŒ** | é¡µé¢åŠ è½½é€Ÿåº¦ | < 2ç§’ | **1-2ç§’** | âœ… å·²è¾¾æ ‡ |
| **ä½“éªŒ** | APIå“åº”æ—¶é—´ | < 500ms | **200-400ms** | âœ… å·²è¾¾æ ‡ |
| **ä½“éªŒ** | ä»»åŠ¡æˆåŠŸç‡ | >95% | **80%** | æ¨¡æ‹Ÿç¯å¢ƒ |
| **ä½“éªŒ** | ç¼“å­˜å‘½ä¸­ç‡ | >20% | **N/A** | v2.1ç›®æ ‡ |

---

## 2. ä¸šåŠ¡æ¶æ„ - å·²ç®€åŒ–

### 2.1 ä¸šåŠ¡é¢†åŸŸæ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          é¢†åŸŸå±‚ï¼ˆDomainï¼‰                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   ä»»åŠ¡åŸŸ         â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚   ç´ æåŸŸ         â”‚                â”‚
â”‚  â”‚  Task Domain    â”‚  ç”Ÿæˆ   â”‚  Asset Domain   â”‚                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚  â”‚â€¢ ä»»åŠ¡åˆ›å»º       â”‚         â”‚â€¢ ç»“æœå­˜å‚¨       â”‚                â”‚
â”‚  â”‚â€¢ ä»»åŠ¡è°ƒåº¦       â”‚         â”‚â€¢ æ ‡ç­¾ç®¡ç†       â”‚                â”‚
â”‚  â”‚â€¢ è¿›åº¦è¿½è¸ª       â”‚         â”‚â€¢ ç‰ˆæœ¬æ§åˆ¶       â”‚                â”‚
â”‚  â”‚â€¢ çŠ¶æ€ç®¡ç†       â”‚         â”‚â€¢ ä½¿ç”¨ç»Ÿè®¡       â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚           â”‚                           â”‚                          â”‚
â”‚           â”‚                           â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚  PromptåŸŸ       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”‚   è´¢åŠ¡åŸŸ         â”‚                â”‚
â”‚  â”‚  Prompt Domain  â”‚  å…³è”   â”‚  Finance Domain â”‚                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                â”‚
â”‚  â”‚â€¢ æ¨¡æ¿ç®¡ç†       â”‚         â”‚â€¢ æˆæœ¬è®¡ç®—       â”‚                â”‚
â”‚  â”‚â€¢ å˜é‡ç³»ç»Ÿ       â”‚         â”‚â€¢ é¢„ç®—æ§åˆ¶       â”‚                â”‚
â”‚  â”‚â€¢ å¤ç”¨ä¼˜åŒ–       â”‚         â”‚â€¢ æ¶ˆè´¹åˆ†æ       â”‚                â”‚
â”‚  â”‚â€¢ æ•ˆæœè¯„ä¼°       â”‚         â”‚â€¢ é¢„è­¦é€šçŸ¥       â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ ¸å¿ƒä¸šåŠ¡æµç¨‹

```
ç”¨æˆ·åˆ›å»ºä»»åŠ¡ â†’ å˜é‡è§£æ â†’ æ‰¹é‡ç”Ÿæˆ â†’ ç»“æœå­˜å‚¨ â†’ ç”¨æˆ·ä¸‹è½½
     â†“              â†“           â†“          â†“          â†“
  æ¨¡æ¿é€‰æ‹©      å±•å¼€ä¸ºNä¸ª    è°ƒç”¨AI API   SQLiteç®¡ç†   ZIPæ‰“åŒ…
  å‚æ•°é…ç½®      å…·ä½“ä»»åŠ¡     å¹¶è¡Œå¤„ç†    è‡ªåŠ¨åˆ†ç±»     æ‰¹é‡æ“ä½œ
  æˆæœ¬é¢„ä¼°      é˜Ÿåˆ—ç®¡ç†     è¿›åº¦æ¨é€    æ ‡ç­¾ç³»ç»Ÿ     ä½¿ç”¨ç»Ÿè®¡
```

---

## 3. æŠ€æœ¯æ¶æ„ - SQLiteå®ç°

### 3.1 æ•´ä½“æ¶æ„å›¾

```
å®¢æˆ·ç«¯å±‚
    â†“
å‰ç«¯åº”ç”¨å±‚ (GitHub Pages)
  Next.js 14.2.5 + React 18
    â†“
APIè·¯ç”±å±‚
  /api/tasks/*, /api/materials/*, /api/templates/*
    â†“
ä¸šåŠ¡é€»è¾‘å±‚
  ä»»åŠ¡ç®¡ç†ã€AIæœåŠ¡è°ƒç”¨ã€ç¼“å­˜é€»è¾‘
    â†“
æ•°æ®å­˜å‚¨å±‚
  SQLiteæ•°æ®åº“ (æœ¬åœ°æ–‡ä»¶)
    â†“
å¤–éƒ¨æœåŠ¡å±‚
  AI Model APIs (OpenAI, MidJourney, etc.)
```

### 3.2 æ•°æ®å­˜å‚¨æ¶æ„ - SQLite

#### æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„

**è¡¨1: tasks (ä»»åŠ¡è¡¨)**
```sql
CREATE TABLE tasks (
  id TEXT PRIMARY KEY,                    -- ä»»åŠ¡ID
  type TEXT NOT NULL,                     -- image/video
  prompt TEXT NOT NULL,                   -- åŸå§‹Prompt
  status TEXT NOT NULL,                   -- pending/running/completed/failed
  progress INTEGER DEFAULT 0,            -- è¿›åº¦ç™¾åˆ†æ¯”
  results TEXT,                           -- JSON: ç»“æœURLæ•°ç»„
  error TEXT,                             -- é”™è¯¯ä¿¡æ¯
  cost REAL DEFAULT 0,                   -- æˆæœ¬
  model TEXT NOT NULL,                    -- ä½¿ç”¨çš„AIæ¨¡å‹
  parameters TEXT,                        -- JSON: ç”Ÿæˆå‚æ•°
  created_at TEXT NOT NULL,              -- åˆ›å»ºæ—¶é—´
  updated_at TEXT NOT NULL               -- æ›´æ–°æ—¶é—´
);
```

**è¡¨2: materials (ç´ æè¡¨)**
```sql
CREATE TABLE materials (
  id TEXT PRIMARY KEY,                    -- ç´ æID
  name TEXT NOT NULL,                     -- ç´ æåç§°
  type TEXT NOT NULL,                     -- image/video
  url TEXT NOT NULL,                      -- æ–‡ä»¶URL
  thumbnail_url TEXT,                     -- ç¼©ç•¥å›¾URL
  size INTEGER NOT NULL,                  -- æ–‡ä»¶å¤§å°
  format TEXT NOT NULL,                   -- æ–‡ä»¶æ ¼å¼
  width INTEGER,                          -- å›¾ç‰‡å®½åº¦
  height INTEGER,                         -- å›¾ç‰‡é«˜åº¦
  duration INTEGER,                       -- è§†é¢‘æ—¶é•¿
  prompt TEXT,                            -- ç”ŸæˆPrompt
  model TEXT,                             -- ä½¿ç”¨çš„æ¨¡å‹
  tags TEXT,                              -- JSON: æ ‡ç­¾æ•°ç»„
  category TEXT,                          -- åˆ†ç±»
  description TEXT,                       -- æè¿°
  metadata TEXT,                          -- JSON: å…ƒæ•°æ®
  task_id TEXT,                           -- å…³è”ä»»åŠ¡ID
  created_at TEXT NOT NULL,              -- åˆ›å»ºæ—¶é—´
  updated_at TEXT NOT NULL,              -- æ›´æ–°æ—¶é—´
  FOREIGN KEY (task_id) REFERENCES tasks(id)
);
```

**è¡¨3: templates (æ¨¡æ¿è¡¨)**
```sql
CREATE TABLE templates (
  id TEXT PRIMARY KEY,                    -- æ¨¡æ¿ID
  name TEXT NOT NULL,                     -- æ¨¡æ¿åç§°
  description TEXT,                       -- æ¨¡æ¿æè¿°
  template TEXT NOT NULL,                 -- Promptæ¨¡æ¿
  variables TEXT,                         -- JSON: å˜é‡å®šä¹‰
  media_type TEXT NOT NULL,              -- image/video
  model TEXT NOT NULL,                    -- é»˜è®¤æ¨¡å‹
  usage_count INTEGER DEFAULT 0,          -- ä½¿ç”¨æ¬¡æ•°
  total_cost REAL DEFAULT 0,             -- æ€»æˆæœ¬
  cache_hit_rate REAL DEFAULT 0,         -- ç¼“å­˜å‘½ä¸­ç‡
  created_at TEXT NOT NULL,              -- åˆ›å»ºæ—¶é—´
  updated_at TEXT NOT NULL               -- æ›´æ–°æ—¶é—´
);
```

**æ‰©å±•è¡¨:**
- `ai_providers`: AIæœåŠ¡æä¾›å•†é…ç½®
- `ai_models`: å…·ä½“AIæ¨¡å‹é…ç½®
- `proxy_configs`: ä»£ç†æœåŠ¡é…ç½®
- `user_preferences`: ç”¨æˆ·åå¥½è®¾ç½®

### 3.3 æŠ€æœ¯é€‰å‹

| å±‚çº§ | æŠ€æœ¯ | ç‰ˆæœ¬ | ç†ç”± |
|------|------|------|------|
| å‰ç«¯æ¡†æ¶ | Next.js | 14.2.5 | App Routerã€SSRã€æ€§èƒ½æœ€ä¼˜ |
| UIç»„ä»¶ | shadcn/ui | latest | æ— ä¾èµ–ã€å¯å®šåˆ¶ |
| çŠ¶æ€ç®¡ç† | React Query + Zustand | latest | ç¼“å­˜ç®¡ç†ã€è‡ªåŠ¨é‡è¯• |
| å›½é™…åŒ– | next-intl | latest | å¤šè¯­è¨€æ”¯æŒ |
| æ•°æ®åº“ | SQLite | 3.x | è½»é‡ã€é›¶é…ç½®ã€æœ¬åœ°å­˜å‚¨ |
| éƒ¨ç½² | GitHub Pages | - | å…è´¹ã€æ˜“ç”¨ã€é™æ€éƒ¨ç½² |

---

## 4. åŠŸèƒ½æ¨¡å—è¯¦ç»†è®¾è®¡

### 4.1 ä»»åŠ¡ç®¡ç†æ¨¡å—

#### 4.1.1 ä»»åŠ¡åˆ›å»ºæµç¨‹

```
ç”¨æˆ·å¡«å†™è¡¨å• â†’ å‰ç«¯éªŒè¯ â†’ APIåˆ›å»º â†’ æ•°æ®åº“å­˜å‚¨ â†’ åå°å¤„ç† â†’ å®æ—¶æ¨é€
     â†“              â†“           â†“          â†“          â†“          â†“
  æ¨¡æ¿é€‰æ‹©      å‚æ•°æ ¡éªŒ     ç”Ÿæˆä»»åŠ¡ID   æŒä¹…åŒ–è®°å½•   å¼‚æ­¥å¤„ç†   SSEæ¨é€
  å˜é‡å®šä¹‰      æˆæœ¬é¢„ä¼°     è¿”å›ä»»åŠ¡å¯¹è±¡   è®¾ç½®çŠ¶æ€   AIè°ƒç”¨     è¿›åº¦æ›´æ–°
  å‚æ•°é…ç½®      å¿«é€Ÿé¢„è§ˆ     å¼€å§‹è½®è¯¢è¿›åº¦   è®°å½•å‚æ•°   ç»“æœå¤„ç†   å®Œæˆé€šçŸ¥
```

#### 4.1.2 æ‰¹é‡ç”Ÿæˆé€»è¾‘

**å˜é‡ç³»ç»Ÿè®¾è®¡:**
```javascript
// ç¤ºä¾‹Promptæ¨¡æ¿
"ä¸€å¼ {å­£èŠ‚}çš„{æ™¯è‰²}ï¼Œ{é£æ ¼}é£æ ¼ï¼Œ{ä¸»ä½“}åœ¨{åŠ¨ä½œ}"

// å˜é‡å®šä¹‰
const variables = {
  å­£èŠ‚: ['æ˜¥å¤©', 'å¤å¤©', 'ç§‹å¤©', 'å†¬å¤©'],
  æ™¯è‰²: ['å±±è„‰', 'æµ·æ´‹', 'æ£®æ—', 'åŸå¸‚'],
  é£æ ¼: ['å†™å®', 'åŠ¨æ¼«', 'æ²¹ç”»', 'æ°´å½©'],
  ä¸»ä½“: ['äººç‰©', 'åŠ¨ç‰©', 'å»ºç­‘', 'è½¦è¾†'],
  åŠ¨ä½œ: ['ç«™ç«‹', 'å¥”è·‘', 'é£ç¿”', 'æ¸¸æ³³']
}

// ç¬›å¡å°”ç§¯å±•å¼€: 4Ã—4Ã—4Ã—4Ã—4 = 1024ä¸ªä»»åŠ¡
```

#### 4.1.3 å®æ—¶è¿›åº¦æ¨é€

**SSEäº‹ä»¶æ ¼å¼:**
```javascript
// EventSourceå“åº”æ ¼å¼
data: {
  type: "status_update",
  data: {
    taskId: "uuid",
    status: "running",
    progress: 45,
    current: 456,
    total: 1024,
    message: "æ­£åœ¨å¤„ç†ç¬¬456ä¸ªä»»åŠ¡..."
  }
}

data: {
  type: "result_ready",
  data: {
    taskId: "uuid",
    sequence: 456,
    url: "https://...",
    thumbnail: "https://...",
    metadata: {...}
  }
}

data: {
  type: "task_completed",
  data: {
    taskId: "uuid",
    summary: {
      total: 1024,
      success: 1018,
      failed: 6,
      totalCost: 81.44,
      duration: "12m 34s"
    }
  }
}
```

### 4.2 ç´ æç®¡ç†æ¨¡å—

#### 4.2.1 è‡ªåŠ¨åˆ†ç±»ç®—æ³•

```javascript
// åŸºäºPromptçš„æ™ºèƒ½åˆ†ç±»
function classifyContent(prompt) {
  const categories = {
    äººç‰©: ['person', 'people', 'human', 'character', 'man', 'woman'],
    é£æ™¯: ['landscape', 'nature', 'mountain', 'ocean', 'sky', 'forest'],
    å»ºç­‘: ['building', 'architecture', 'city', 'house', 'structure'],
    åŠ¨ç‰©: ['animal', 'pet', 'dog', 'cat', 'bird', 'wildlife'],
    è‰ºæœ¯: ['art', 'painting', 'drawing', 'abstract', 'creative'],
    ç§‘æŠ€: ['technology', 'futuristic', 'digital', 'computer', 'tech']
  }

  // åŸºäºå…³é”®è¯åŒ¹é…çš„åˆ†ç±»é€»è¾‘
  return detectCategories(prompt, categories)
}
```

#### 4.2.2 æ ‡ç­¾ç³»ç»Ÿ

```javascript
// è‡ªåŠ¨æå–æ ‡ç­¾
const tags = extractTags(prompt, {
  // é£æ ¼æ ‡ç­¾
  styles: ['photorealistic', 'cartoon', '3d render', 'oil painting'],
  // æƒ…æ„Ÿæ ‡ç­¾
  emotions: ['happy', 'sad', 'excited', 'peaceful', 'dramatic'],
  // åœºæ™¯æ ‡ç­¾
  scenes: ['indoors', 'outdoors', 'daytime', 'nighttime', 'sunset'],
  // è‰²å½©æ ‡ç­¾
  colors: ['vibrant', 'monochrome', 'warm', 'cool', 'pastel']
})
```

### 4.3 æ¨¡æ¿ç®¡ç†æ¨¡å—

#### 4.3.1 å˜é‡ç³»ç»Ÿè®¾è®¡

**å˜é‡å®šä¹‰æ ¼å¼:**
```json
{
  "name": "ç”µå•†äº§å“å±•ç¤ºæ¨¡æ¿",
  "template": "ä¸€å¼ {äº§å“ç±»å‹}çš„{æ‹æ‘„è§’åº¦}ç…§ç‰‡ï¼Œ{èƒŒæ™¯é£æ ¼}èƒŒæ™¯ï¼Œ{å…‰çº¿æ¡ä»¶}å…‰çº¿ï¼Œäº§å“{æ‘†æ”¾æ–¹å¼}æ‘†æ”¾ï¼Œ{é£æ ¼ä¿®é¥°}é£æ ¼",
  "variables": [
    {
      "name": "äº§å“ç±»å‹",
      "type": "select",
      "options": ["æ‰‹æœº", "æ‰‹è¡¨", "è€³æœº", "ç›¸æœº", "åŒ…åŒ…"],
      "required": true
    },
    {
      "name": "æ‹æ‘„è§’åº¦",
      "type": "select",
      "options": ["ä¿¯è§†", "45åº¦è§’", "ä¾§é¢", "ç‰¹å†™"],
      "required": true
    },
    {
      "name": "èƒŒæ™¯é£æ ¼",
      "type": "select",
      "options": ["çº¯è‰²", "æ¸å˜", "æœ¨è´¨", "å¤§ç†çŸ³", "åŸå¸‚è¡—æ™¯"],
      "default": "çº¯è‰²"
    }
  ],
  "media_type": "image",
  "model": "dall-e-3"
}
```

### 4.4 è´¢åŠ¡ç®¡ç†æ¨¡å—

#### 4.4.1 æˆæœ¬è®¡ç®—æ¨¡å‹

```javascript
// åŸºç¡€æˆæœ¬é…ç½®
const MODEL_COSTS = {
  // å›¾ç‰‡æ¨¡å‹ (æ¯å¼ )
  'dall-e-3': 0.04,
  'midjourney-v6': 0.03,
  'stable-diffusion-xl': 0.01,
  'flux-pro': 0.03,
  // è§†é¢‘æ¨¡å‹ (æ¯5ç§’)
  'runway-gen3': 0.25,
  'pika-labs': 0.12,
  'stable-video': 0.08
}

// æ‰¹é‡ç”Ÿæˆæˆæœ¬è®¡ç®—
function calculateBatchCost(variables, model) {
  const totalCombinations = variables.reduce((acc, variable) => {
    return acc * variable.options.length
  }, 1)

  return MODEL_COSTS[model] * totalCombinations
}
```

---

## 5. APIæ¥å£è®¾è®¡ - SQLiteå®ç°

### 5.1 ä»»åŠ¡ç®¡ç†æ¥å£

#### 5.1.1 åˆ›å»ºä»»åŠ¡
```http
POST /api/tasks
Content-Type: application/json

{
  "type": "image",
  "prompt": "ä¸€å¼ {å­£èŠ‚}çš„{æ™¯è‰²}",
  "model": "dall-e-3",
  "parameters": {
    "size": "1024x1024",
    "quality": "standard",
    "variables": {
      "å­£èŠ‚": ["æ˜¥å¤©", "å¤å¤©", "ç§‹å¤©", "å†¬å¤©"],
      "æ™¯è‰²": ["å±±è„‰", "æµ·æ´‹"]
    },
    "quantity": 1,
    "enableCache": true
  }
}

Response:
{
  "success": true,
  "data": {
    "id": "task-uuid",
    "status": "pending",
    "estimatedCost": 0.32,
    "estimatedCount": 8,
    "createdAt": "2025-01-21T10:30:00Z"
  }
}
```

#### 5.1.2 è·å–ä»»åŠ¡åˆ—è¡¨
```http
GET /api/tasks?status=completed&type=image&page=1&pageSize=20

Response:
{
  "success": true,
  "data": {
    "items": [...],
    "total": 156,
    "page": 1,
    "pageSize": 20,
    "hasMore": true
  }
}
```

#### 5.1.3 å®æ—¶è¿›åº¦æ¨é€
```http
GET /api/tasks/{taskId}/stream

Event: status_update
data: {"taskId":"uuid","status":"running","progress":25,"current":2,"total":8}

Event: result_ready
data: {"taskId":"uuid","sequence":1,"url":"https://...","thumbnail":"https://..."}

Event: task_completed
data: {"taskId":"uuid","summary":{"total":8,"success":8,"failed":0,"totalCost":0.32}}
```

### 5.2 ç´ æç®¡ç†æ¥å£

#### 5.2.1 è·å–ç´ æåˆ—è¡¨
```http
GET /api/materials?type=image&category=é£æ™¯&search=æ˜¥å¤©&sortBy=createdAt&sortOrder=desc

Response:
{
  "success": true,
  "data": {
    "items": [...],
    "total": 45,
    "categories": ["é£æ™¯", "äººç‰©", "å»ºç­‘", "æŠ½è±¡"],
    "tags": ["æ˜¥å¤©", "è‡ªç„¶", "é˜³å…‰"]
  }
}
```

#### 5.2.2 æ‰¹é‡æ“ä½œ
```http
PUT /api/materials/batch
Content-Type: application/json

{
  "operation": "delete",
  "materialIds": ["id1", "id2", "id3"]
}

Response:
{
  "success": true,
  "data": {
    "deletedCount": 3
  }
}
```

### 5.3 æ¨¡æ¿ç®¡ç†æ¥å£

#### 5.3.1 è·å–æ¨¡æ¿åˆ—è¡¨
```http
GET /api/templates?mediaType=image&page=1&pageSize=10

Response:
{
  "success": true,
  "data": {
    "items": [...],
    "total": 12,
    "page": 1,
    "pageSize": 10
  }
}
```

---

## 6. éƒ¨ç½²æ¶æ„ - GitHub Pages

### 6.1 éƒ¨ç½²æ–¹æ¡ˆ

```
å¼€å‘ç¯å¢ƒ
â”œâ”€ æœ¬åœ°å¼€å‘æœåŠ¡å™¨ (npm run dev)
â””â”€ SQLiteæ•°æ®åº“ (data/ai-creator-studio.db)

â†“ npm run build:static

ç”Ÿäº§ç¯å¢ƒ
â”œâ”€ GitHub Pages (é™æ€ç«™ç‚¹)
â”œâ”€ Next.jsé™æ€æ–‡ä»¶ (out/ç›®å½•)
â””â”€ æ— æ•°æ®åº“ (å‰ç«¯åº”ç”¨)

æ³¨æ„äº‹é¡¹:
- âœ… é€‚åˆæ¼”ç¤ºå’ŒåŸå‹å±•ç¤º
- âœ… é›¶æˆæœ¬éƒ¨ç½²
- âš ï¸ æ•°æ®ä»…åœ¨å‰ç«¯å†…å­˜ä¸­
- âš ï¸ åˆ·æ–°é¡µé¢ä¼šä¸¢å¤±æ•°æ®
```

### 6.2 æ•°æ®æŒä¹…åŒ–ç­–ç•¥

**å½“å‰å®ç°:**
- æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°SQLiteæ–‡ä»¶ä¸­
- éƒ¨ç½²æ—¶æ•°æ®åº“æ–‡ä»¶ä¸ä¼šä¸Šä¼ åˆ°GitHub
- ç”Ÿäº§ç¯å¢ƒéœ€è¦åç«¯æœåŠ¡æ”¯æŒ

**å‡çº§è·¯å¾„:**
1. **Verceléƒ¨ç½²**: æ·»åŠ Vercelåç«¯APIæ”¯æŒ
2. **Railway/Render**: éƒ¨ç½²Node.jsåç«¯æœåŠ¡
3. **äº‘æ•°æ®åº“**: è¿ç§»åˆ°PostgreSQL/MySQL
4. **æ–‡ä»¶å­˜å‚¨**: é›†æˆAWS S3/Cloudinary

---

## 7. å½“å‰å®ç°çŠ¶æ€

### 7.1 å·²å®ç°åŠŸèƒ½ âœ…

- âœ… åŸºç¡€ä»»åŠ¡åˆ›å»ºå’Œç®¡ç†
- âœ… SQLiteæ•°æ®åº“æŒä¹…åŒ–
- âœ… åŸºç¡€ç´ æç®¡ç†
- âœ… æ¨¡æ¿ç³»ç»Ÿ(æ— å˜é‡)
- âœ… å›½é™…åŒ–æ”¯æŒ(ä¸­/è‹±)
- âœ… å“åº”å¼UIè®¾è®¡
- âœ… åŸºç¡€æ•°æ®ç»Ÿè®¡
- âœ… AIæ¨¡å‹é…ç½®ç®¡ç†

### 7.2 å¾…å®ç°åŠŸèƒ½ ğŸš§

- ğŸš§ å˜é‡ç³»ç»Ÿ(æ‰¹é‡ç”Ÿæˆ)
- ğŸš§ æ™ºèƒ½ç¼“å­˜æœºåˆ¶
- ğŸš§ æ‰¹é‡æ“ä½œåŠŸèƒ½
- ğŸš§ é«˜çº§ç»Ÿè®¡åˆ†æ
- ğŸš§ æ–‡ä»¶ä¸Šä¼ ç®¡ç†
- ğŸš§ ç”¨æˆ·æƒé™ç³»ç»Ÿ
- ğŸš§ å¯¼å‡ºåŠŸèƒ½

### 7.3 æŠ€æœ¯å€ºåŠ¡ ğŸ”§

- ğŸ”§ APIé”™è¯¯å¤„ç†ä¼˜åŒ–
- ğŸ”§ å‰ç«¯çŠ¶æ€ç®¡ç†é‡æ„
- ğŸ”§ æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- ğŸ”§ ç¼“å­˜ç­–ç•¥å®ç°
- ğŸ”§ å•å…ƒæµ‹è¯•è¦†ç›–

---

## 8. åç»­å¼€å‘è®¡åˆ’

### 8.1 çŸ­æœŸç›®æ ‡ (v2.1 - 2å‘¨å†…)

**åŠŸèƒ½å¢å¼º:**
- å®ç°å˜é‡ç³»ç»Ÿå’Œæ‰¹é‡ç”Ÿæˆ
- æ·»åŠ åŸºç¡€ç¼“å­˜æœºåˆ¶
- å®Œå–„æ‰¹é‡æ“ä½œåŠŸèƒ½

**æŠ€æœ¯ä¼˜åŒ–:**
- ä¼˜åŒ–APIå“åº”æ€§èƒ½
- æ”¹è¿›é”™è¯¯å¤„ç†æœºåˆ¶
- æ·»åŠ åŸºç¡€å•å…ƒæµ‹è¯•

### 8.2 ä¸­æœŸç›®æ ‡ (v2.5 - 1ä¸ªæœˆå†…)

**åŠŸèƒ½å®Œå–„:**
- é«˜çº§æ•°æ®åˆ†æå’Œå¯è§†åŒ–
- æ–‡ä»¶ä¸Šä¼ å’Œç®¡ç†ç³»ç»Ÿ
- ç”¨æˆ·åå¥½å’Œä¸ªæ€§åŒ–è®¾ç½®

**æ¶æ„å‡çº§:**
- åç«¯APIæœåŠ¡éƒ¨ç½²
- äº‘æ•°æ®åº“è¿ç§»
- æ–‡ä»¶å­˜å‚¨é›†æˆ

### 8.3 é•¿æœŸç›®æ ‡ (v3.0 - 3ä¸ªæœˆå†…)

**ä¼ä¸šçº§åŠŸèƒ½:**
- ç”¨æˆ·æƒé™å’Œå›¢é˜Ÿåä½œ
- å·¥ä½œæµç¼–æ’ç³»ç»Ÿ
- é«˜çº§ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–

**å•†ä¸šåŒ–å‡†å¤‡:**
- è®¢é˜…è®¡è´¹ç³»ç»Ÿ
- APIå¼€æ”¾å¹³å°
- ç§æœ‰åŒ–éƒ¨ç½²æ–¹æ¡ˆ

---

## 9. é™„å½•

### 9.1 APIå“åº”æ ¼å¼æ ‡å‡†

```typescript
// ç»Ÿä¸€å“åº”æ ¼å¼
interface APIResponse<T> {
  success: boolean
  data?: T
  error?: {
    code: string
    message: string
    details?: any
  }
  pagination?: {
    page: number
    pageSize: number
    total: number
    hasMore: boolean
  }
}
```

### 9.2 æ•°æ®åº“ç´¢å¼•ç­–ç•¥

```sql
-- å·²åˆ›å»ºçš„ç´¢å¼•
CREATE INDEX idx_tasks_status ON tasks(status);
CREATE INDEX idx_tasks_type ON tasks(type);
CREATE INDEX idx_tasks_created_at ON tasks(created_at);
CREATE INDEX idx_materials_type ON materials(type);
CREATE INDEX idx_materials_category ON materials(category);
CREATE INDEX idx_materials_created_at ON materials(created_at);
CREATE INDEX idx_templates_media_type ON templates(media_type);
```

### 9.3 æˆæœ¬ä¼°ç®—å‚è€ƒ

| åŠŸèƒ½æ¨¡å— | å¼€å‘å·¥æ—¶ | é¢„ä¼°æˆæœ¬ | å¤‡æ³¨ |
|----------|----------|----------|------|
| å˜é‡ç³»ç»Ÿ | 40h | $6,000 | æ ¸å¿ƒåŠŸèƒ½ï¼Œä¼˜å…ˆçº§æœ€é«˜ |
| ç¼“å­˜ç³»ç»Ÿ | 30h | $4,500 | æˆæœ¬èŠ‚çœæ˜¾è‘— |
| æ‰¹é‡æ“ä½œ | 25h | $3,750 | ç”¨æˆ·ä½“éªŒæå‡ |
| é«˜çº§ç»Ÿè®¡ | 35h | $5,250 | æ•°æ®ä»·å€¼æŒ–æ˜ |
| æ–‡ä»¶ç®¡ç† | 45h | $6,750 | åŠŸèƒ½å®Œæ•´æ€§ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**æœ€åä¿®è®¢**: 2025å¹´1æœˆ21æ—¥
**ä¿®è®¢äºº**: AIå¼€å‘å›¢é˜Ÿ